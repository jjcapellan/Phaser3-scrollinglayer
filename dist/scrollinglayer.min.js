"use strict";(()=>{var u=class{constructor(i){this.data=i}setAlpha(i){return i=Math.max(0,i),this.data.img1.setAlpha(i),this.data.img2.setAlpha(i),this}setOrigin(i){return this.data.origin=Phaser.Math.Clamp(i,0,1),this.setPosition(this.data.position),this}setPosition(i){if(this.data.position=i,this.data.isH){let r=i-this.data.origin*this.data.height;return this.data.img1.y=this.data.img2.y=r,this}let t=i-this.data.origin*this.data.width;return this.data.img1.x=this.data.img2.x=t,this}setOverlap(i){return this.data.overlap=Math.max(0,i),this}setSpeed(i){return this.data.speed=i,this}setVisible(i){return this.data.img1.setVisible(i),this.data.img2.setVisible(i),this}};var n=class extends Phaser.GameObjects.Blitter{constructor(t,r){super(t);this._hLayers=[];this._vLayers=[];this._handlers=[];this.setTexture(r),this.x=0,this.y=0}addHlayer(t,r,e){let s=this.scene.textures.getFrame(this.texture.key,e).width,g=this.scene.textures.getFrame(this.texture.key,e).height,h=1,y=0,p=r<0?s-h:-s+h,x=this.create(y,t,e),a=this.create(p,t,e),m={isH:!0,speed:r,position:t,img1:x,img2:a,width:s,height:g,overlap:h,origin:0};this._hLayers.push(m);let o=new u(m);return this._handlers.push(o),o}addVlayer(t,r,e){let s=this.scene.textures.getFrame(this.texture.key,e).width,g=this.scene.textures.getFrame(this.texture.key,e).height,h=1,y=0,p=r<0?g-h:-g+h,x=this.create(t,y,e),a=this.create(t,p,e),m={isH:!1,speed:r,position:t,img1:x,img2:a,width:s,height:g,overlap:h,origin:0};this._vLayers.push(m);let o=new u(m);return this._handlers.push(o),o}preUpdate(t,r){this._hLayers.forEach(e=>{let s=c(e.speed,r);if(e.img1.x+=s,e.img2.x+=s,e.speed<0&&e.img1.x<-e.width){e.img1.x=e.width+e.img2.x-e.overlap;return}if(e.speed<0&&e.img2.x<-e.width){e.img2.x=e.width+e.img1.x-e.overlap;return}if(e.speed>0&&e.img1.x>e.width){e.img1.x=-e.width+e.img2.x+e.overlap;return}if(e.speed>0&&e.img2.x>e.width){e.img2.x=-e.width+e.img1.x+e.overlap;return}}),this._vLayers.forEach(e=>{let s=c(e.speed,r);if(e.img1.y+=s,e.img2.y+=s,e.speed<0&&e.img1.y<-e.height){e.img1.y=e.height+e.img2.y-e.overlap;return}if(e.speed<0&&e.img2.y<-e.height){e.img2.y=e.height+e.img1.y-e.overlap;return}if(e.speed>0&&e.img1.y>e.height){e.img1.y=-e.height+e.img2.y+e.overlap;return}if(e.speed>0&&e.img2.y>e.height){e.img2.y=-e.height+e.img1.y+e.overlap;return}})}removeLayer(t){t.data.img1.destroy(),t.data.img2.destroy();let r=t.data.isH?this._hLayers:this._vLayers;r.splice(r.indexOf(t.data),1),this._handlers.splice(this._handlers.indexOf(t))}destroy(t){this._handlers=null,this._hLayers=null,this._vLayers=null,super.destroy(t)}};function c(l,i){return i*l/1e3}var _=n;window.Layers=n;})();
