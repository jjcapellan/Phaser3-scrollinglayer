"use strict";(()=>{var l=class{constructor(t){this.data=t}setAlpha(t){return t=Math.max(0,t),this.data.img1.setAlpha(t),this.data.img2.setAlpha(t),this}setFrame(t){return this.data.img1.setFrame(t),this.data.img2.setFrame(t),this}setOrigin(t){return this.data.origin=Phaser.Math.Clamp(t,0,1),this.setPosition(this.data.position),this}setPosition(t){if(this.data.position=t,this.data.isH){let r=t-this.data.origin*this.data.height;return this.data.img1.y=this.data.img2.y=r,this}let i=t-this.data.origin*this.data.width;return this.data.img1.x=this.data.img2.x=i,this}setOverlap(t){let i=this.data,r=i.img1,e=i.img2;return i.overlap=Math.max(0,t),i.isH?r.x<e.x?(e.x=r.x+i.width-i.overlap,this):(e.x=r.x-i.width+i.overlap,this):r.y<e.y?(e.y=r.y+i.height-i.overlap,this):(e.y=r.y-i.height+i.overlap,this)}setSpeed(t){return this.data.speed=t,this}setVisible(t){return this.data.img1.setVisible(t),this.data.img2.setVisible(t),this}};var n=class extends Phaser.GameObjects.Blitter{constructor(i,r){super(i);this._hLayers=[];this._vLayers=[];this._handlers=[];this.VERSION="3.0.0";this.setTexture(r),this.x=0,this.y=0}addHlayer(i,r,e){let s=this.scene.textures.getFrame(this.texture.key,e).width,g=this.scene.textures.getFrame(this.texture.key,e).height,h=1,y=0,p=r<0?s-h:-s+h,a=this.create(y,i,e),x=this.create(p,i,e),m={isH:!0,speed:r,position:i,img1:a,img2:x,width:s,height:g,overlap:h,origin:0};this._hLayers.push(m);let o=new l(m);return this._handlers.push(o),o}addVlayer(i,r,e){let s=this.scene.textures.getFrame(this.texture.key,e).width,g=this.scene.textures.getFrame(this.texture.key,e).height,h=1,y=0,p=r<0?g-h:-g+h,a=this.create(i,y,e),x=this.create(i,p,e),m={isH:!1,speed:r,position:i,img1:a,img2:x,width:s,height:g,overlap:h,origin:0};this._vLayers.push(m);let o=new l(m);return this._handlers.push(o),o}preUpdate(i,r){this._hLayers.forEach(e=>{let s=c(e.speed,r);if(e.img1.x+=s,e.img2.x+=s,e.speed<0&&e.img1.x<-e.width){e.img1.x=e.width+e.img2.x-e.overlap;return}if(e.speed<0&&e.img2.x<-e.width){e.img2.x=e.width+e.img1.x-e.overlap;return}if(e.speed>0&&e.img1.x>e.width){e.img1.x=-e.width+e.img2.x+e.overlap;return}if(e.speed>0&&e.img2.x>e.width){e.img2.x=-e.width+e.img1.x+e.overlap;return}}),this._vLayers.forEach(e=>{let s=c(e.speed,r);if(e.img1.y+=s,e.img2.y+=s,e.speed<0&&e.img1.y<-e.height){e.img1.y=e.height+e.img2.y-e.overlap;return}if(e.speed<0&&e.img2.y<-e.height){e.img2.y=e.height+e.img1.y-e.overlap;return}if(e.speed>0&&e.img1.y>e.height){e.img1.y=-e.height+e.img2.y+e.overlap;return}if(e.speed>0&&e.img2.y>e.height){e.img2.y=-e.height+e.img1.y+e.overlap;return}})}removeLayer(i){i.data.img1.destroy(),i.data.img2.destroy();let r=i.data.isH?this._hLayers:this._vLayers;r.splice(r.indexOf(i.data),1),this._handlers.splice(this._handlers.indexOf(i))}destroy(i){this._handlers=null,this._hLayers=null,this._vLayers=null,super.destroy(i)}};function c(u,t){return t*u/1e3}var f=n;window.LayerFactory=n;})();
